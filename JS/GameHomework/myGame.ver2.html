<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>é¸ç‰Œ</title>
    <link rel="stylesheet" href="./reset.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <style>
        [row-id].active {
            border: solid 5px #ccc;
            box-shadow: 0 0 20px #ccf;
            transform: 0s;
        }

        i {
            line-height: 1.8;
        }

        .col-2 {
            text-align: center;
            font-size: 50px;
            height: 100px;
            justify-content: center;
        }

        .col-4 {
            display: flex;
            margin: auto;
            justify-content: center;
            font-size: 30px;
        }

        .col-4 p {
            margin: auto;
        }

        .col-4 img {
            display: block;
            margin: auto;
            width: 100px;
        }

        .btn {
            color: #fff;
            font-weight: 900;
        }

        .hand-cards {
            font-size: 50px;
            display: flex;
        }

        .tile {
            width: auto;
            padding: 0;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="row">
            <div class="col-2"></div>
            <div col-id="1" row-id="0" class="col-2"></div>
            <div col-id="2" row-id="0" class="col-2"></div>
            <div col-id="3" row-id="0" class="col-2"></div>
            <div col-id="4" row-id="0" class="col-2"></div>
            <div class="col-2"></div>
        </div>
        <div class="row">
            <div class="col-2"></div>
            <div col-id="1" row-id="1" class="col-2 active"></div>
            <div col-id="2" row-id="1" class="col-2 active"></div>
            <div col-id="3" row-id="1" class="col-2 active"></div>
            <div col-id="4" row-id="1" class="col-2 active"></div>
            <div class="col-2"></div>
        </div>
        <div class="row">
            <div class="col-2"></div>
            <div col-id="1" row-id="2" class="col-2"></div>
            <div col-id="2" row-id="2" class="col-2"></div>
            <div col-id="3" row-id="2" class="col-2"></div>
            <div col-id="4" row-id="2" class="col-2"></div>
            <div class="col-2"></div>
        </div>
        <div class="row">
            <!-- <div class="col-4">
                <p>å¤©ä¸‹æ­¦åŠŸ</p>
                <img src="./C8763.jpg" class="speed" alt="">
                <p>å”¯å¿«ä¸ç ´</p>
            </div> -->
            <div class="col-4">
                <button type="button" class="btn btn-info" id="start">é–‹å§‹</button>
            </div>
            <!-- <div class="col-4">
                <button type="button" class="btn btn-info" id="rest">ä¼‘æ¯ä¸€ä¸‹ é…å£èŒ¶</button>
            </div> -->
        </div>
        <div class="row hand-cards justify-content-center">

        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
        crossorigin="anonymous"></script>

    <script>
        // let MahjongPile = [
        //     {
        //         id: 0,
        //         emoji: "ğŸ€€"
        //     },
        //     {
        //         id: 1,
        //         emoji: "ğŸ€"
        //     },
        //     {
        //         id: 2,
        //         emoji: "ğŸ€‚"
        //     },
        //     {
        //         id: 3,
        //         emoji: "ğŸ€ƒ"
        //     },
        //     {
        //         id: 4,
        //         emoji: "ğŸ€„"
        //     },
        //     {
        //         id: 5,
        //         emoji: "ğŸ€…"
        //     },
        //     {
        //         id: 6,
        //         emoji: "ğŸ€†"
        //     },
        //     {
        //         id: 7,
        //         emoji: "ğŸ€‡"
        //     },
        //     {
        //         id: 8,
        //         emoji: "ğŸ€ˆ"
        //     },
        //     {
        //         id: 9,
        //         emoji: "ğŸ€‰"
        //     },
        //     {
        //         id: 10,
        //         emoji: "ğŸ€Š"
        //     },
        //     {
        //         id: 11,
        //         emoji: "ğŸ€‹"
        //     },
        //     {
        //         id: 12,
        //         emoji: "ğŸ€Œ"
        //     },
        //     {
        //         id: 13,
        //         emoji: "ğŸ€"
        //     },
        //     {
        //         id: 14,
        //         emoji: "ğŸ€"
        //     },
        //     {
        //         id: 15,
        //         emoji: "ğŸ€"
        //     },
        //     {
        //         id: 16,
        //         emoji: "ğŸ€"
        //     },
        //     {
        //         id: 17,
        //         emoji: "ğŸ€‘"
        //     },
        //     {
        //         id: 18,
        //         emoji: "ğŸ€’"
        //     },
        //     {
        //         id: 19,
        //         emoji: "ğŸ€“"
        //     },
        //     {
        //         id: 20,
        //         emoji: "ğŸ€”"
        //     },
        //     {
        //         id: 21,
        //         emoji: "ğŸ€•"
        //     },
        //     {
        //         id: 22,
        //         emoji: "ğŸ€–"
        //     },
        //     {
        //         id: 23,
        //         emoji: "ğŸ€—"
        //     },
        //     {
        //         id: 24,
        //         emoji: "ğŸ€˜"
        //     },
        //     {
        //         id: 25,
        //         emoji: "ğŸ€™"
        //     },
        //     {
        //         id: 26,
        //         emoji: "ğŸ€š"
        //     },
        //     {
        //         id: 27,
        //         emoji: "ğŸ€›"
        //     },
        //     {
        //         id: 28,
        //         emoji: "ğŸ€œ"
        //     },
        //     {
        //         id: 29,
        //         emoji: "ğŸ€"
        //     },
        //     {
        //         id: 30,
        //         emoji: "ğŸ€"
        //     },
        //     {
        //         id: 31,
        //         emoji: "ğŸ€Ÿ"
        //     },
        //     {
        //         id: 32,
        //         emoji: "ğŸ€ "
        //     },
        //     {
        //         id: 33,
        //         emoji: "ğŸ€¡"
        //     },
        //     {
        //         id: 34,
        //         emoji: "ğŸ€€"
        //     },
        //     {
        //         id: 35,
        //         emoji: "ğŸ€"
        //     },
        //     {
        //         id: 36,
        //         emoji: "ğŸ€‚"
        //     },
        //     {
        //         id: 37,
        //         emoji: "ğŸ€ƒ"
        //     },
        //     {
        //         id: 38,
        //         emoji: "ğŸ€„"
        //     },
        //     {
        //         id: 39,
        //         emoji: "ğŸ€…"
        //     },
        //     {
        //         id: 40,
        //         emoji: "ğŸ€†"
        //     },
        //     {
        //         id: 41,
        //         emoji: "ğŸ€‡"
        //     },
        //     {
        //         id: 42,
        //         emoji: "ğŸ€ˆ"
        //     },
        //     {
        //         id: 43,
        //         emoji: "ğŸ€‰"
        //     },
        //     {
        //         id: 44,
        //         emoji: "ğŸ€Š"
        //     },
        //     {
        //         id: 45,
        //         emoji: "ğŸ€‹"
        //     },
        //     {
        //         id: 46,
        //         emoji: "ğŸ€Œ"
        //     },
        //     {
        //         id: 47,
        //         emoji: "ğŸ€"
        //     },
        //     {
        //         id: 48,
        //         emoji: "ğŸ€"
        //     },
        //     {
        //         id: 49,
        //         emoji: "ğŸ€"
        //     },
        //     {
        //         id: 50,
        //         emoji: "ğŸ€"
        //     },
        //     {
        //         id: 51,
        //         emoji: "ğŸ€‘"
        //     },
        //     {
        //         id: 52,
        //         emoji: "ğŸ€’"
        //     },
        //     {
        //         id: 53,
        //         emoji: "ğŸ€“"
        //     },
        //     {
        //         id: 54,
        //         emoji: "ğŸ€”"
        //     },
        //     {
        //         id: 55,
        //         emoji: "ğŸ€•"
        //     },
        //     {
        //         id: 56,
        //         emoji: "ğŸ€–"
        //     },
        //     {
        //         id: 57,
        //         emoji: "ğŸ€—"
        //     },
        //     {
        //         id: 58,
        //         emoji: "ğŸ€˜"
        //     },
        //     {
        //         id: 59,
        //         emoji: "ğŸ€™"
        //     },
        //     {
        //         id: 60,
        //         emoji: "ğŸ€š"
        //     },
        //     {
        //         id: 61,
        //         emoji: "ğŸ€›"
        //     },
        //     {
        //         id: 62,
        //         emoji: "ğŸ€œ"
        //     },
        //     {
        //         id: 63,
        //         emoji: "ğŸ€"
        //     },
        //     {
        //         id: 64,
        //         emoji: "ğŸ€"
        //     },
        //     {
        //         id: 65,
        //         emoji: "ğŸ€Ÿ"
        //     },
        //     {
        //         id: 66,
        //         emoji: "ğŸ€ "
        //     },
        //     {
        //         id: 67,
        //         emoji: "ğŸ€¡"
        //     },
        //     {
        //         id: 68,
        //         emoji: "ğŸ€€"
        //     },
        //     {
        //         id: 69,
        //         emoji: "ğŸ€"
        //     },
        //     {
        //         id: 70,
        //         emoji: "ğŸ€‚"
        //     },
        //     {
        //         id: 71,
        //         emoji: "ğŸ€ƒ"
        //     },
        //     {
        //         id: 72,
        //         emoji: "ğŸ€„"
        //     },
        //     {
        //         id: 73,
        //         emoji: "ğŸ€…"
        //     },
        //     {
        //         id: 74,
        //         emoji: "ğŸ€†"
        //     },
        //     {
        //         id: 75,
        //         emoji: "ğŸ€‡"
        //     },
        //     {
        //         id: 76,
        //         emoji: "ğŸ€ˆ"
        //     },
        //     {
        //         id: 77,
        //         emoji: "ğŸ€‰"
        //     },
        //     {
        //         id: 78,
        //         emoji: "ğŸ€Š"
        //     },
        //     {
        //         id: 79,
        //         emoji: "ğŸ€‹"
        //     },
        //     {
        //         id: 80,
        //         emoji: "ğŸ€Œ"
        //     },
        //     {
        //         id: 81,
        //         emoji: "ğŸ€"
        //     },
        //     {
        //         id: 82,
        //         emoji: "ğŸ€"
        //     },
        //     {
        //         id: 83,
        //         emoji: "ğŸ€"
        //     },
        //     {
        //         id: 84,
        //         emoji: "ğŸ€"
        //     },
        //     {
        //         id: 85,
        //         emoji: "ğŸ€‘"
        //     },
        //     {
        //         id: 86,
        //         emoji: "ğŸ€’"
        //     },
        //     {
        //         id: 87,
        //         emoji: "ğŸ€“"
        //     },
        //     {
        //         id: 88,
        //         emoji: "ğŸ€”"
        //     },
        //     {
        //         id: 89,
        //         emoji: "ğŸ€•"
        //     },
        //     {
        //         id: 90,
        //         emoji: "ğŸ€–"
        //     },
        //     {
        //         id: 91,
        //         emoji: "ğŸ€—"
        //     },
        //     {
        //         id: 92,
        //         emoji: "ğŸ€˜"
        //     },
        //     {
        //         id: 93,
        //         emoji: "ğŸ€™"
        //     },
        //     {
        //         id: 94,
        //         emoji: "ğŸ€š"
        //     },
        //     {
        //         id: 95,
        //         emoji: "ğŸ€›"
        //     },
        //     {
        //         id: 96,
        //         emoji: "ğŸ€œ"
        //     },
        //     {
        //         id: 97,
        //         emoji: "ğŸ€"
        //     },
        //     {
        //         id: 98,
        //         emoji: "ğŸ€"
        //     },
        //     {
        //         id: 99,
        //         emoji: "ğŸ€Ÿ"
        //     },
        //     {
        //         id: 100,
        //         emoji: "ğŸ€ "
        //     },
        //     {
        //         id: 101,
        //         emoji: "ğŸ€¡"
        //     },
        //     {
        //         id: 102,
        //         emoji: "ğŸ€€"
        //     },
        //     {
        //         id: 103,
        //         emoji: "ğŸ€"
        //     },
        //     {
        //         id: 104,
        //         emoji: "ğŸ€‚"
        //     },
        //     {
        //         id: 105,
        //         emoji: "ğŸ€ƒ"
        //     },
        //     {
        //         id: 106,
        //         emoji: "ğŸ€„"
        //     },
        //     {
        //         id: 107,
        //         emoji: "ğŸ€…"
        //     },
        //     {
        //         id: 108,
        //         emoji: "ğŸ€†"
        //     },
        //     {
        //         id: 109,
        //         emoji: "ğŸ€‡"
        //     },
        //     {
        //         id: 110,
        //         emoji: "ğŸ€ˆ"
        //     },
        //     {
        //         id: 111,
        //         emoji: "ğŸ€‰"
        //     },
        //     {
        //         id: 112,
        //         emoji: "ğŸ€Š"
        //     },
        //     {
        //         id: 113,
        //         emoji: "ğŸ€‹"
        //     },
        //     {
        //         id: 114,
        //         emoji: "ğŸ€Œ"
        //     },
        //     {
        //         id: 115,
        //         emoji: "ğŸ€"
        //     },
        //     {
        //         id: 116,
        //         emoji: "ğŸ€"
        //     },
        //     {
        //         id: 117,
        //         emoji: "ğŸ€"
        //     },
        //     {
        //         id: 118,
        //         emoji: "ğŸ€"
        //     },
        //     {
        //         id: 119,
        //         emoji: "ğŸ€‘"
        //     },
        //     {
        //         id: 120,
        //         emoji: "ğŸ€’"
        //     },
        //     {
        //         id: 121,
        //         emoji: "ğŸ€“"
        //     },
        //     {
        //         id: 122,
        //         emoji: "ğŸ€”"
        //     },
        //     {
        //         id: 123,
        //         emoji: "ğŸ€•"
        //     },
        //     {
        //         id: 124,
        //         emoji: "ğŸ€–"
        //     },
        //     {
        //         id: 125,
        //         emoji: "ğŸ€—"
        //     },
        //     {
        //         id: 126,
        //         emoji: "ğŸ€˜"
        //     },
        //     {
        //         id: 127,
        //         emoji: "ğŸ€™"
        //     },
        //     {
        //         id: 128,
        //         emoji: "ğŸ€š"
        //     },
        //     {
        //         id: 129,
        //         emoji: "ğŸ€›"
        //     },
        //     {
        //         id: 130,
        //         emoji: "ğŸ€œ"
        //     },
        //     {
        //         id: 131,
        //         emoji: "ğŸ€"
        //     },
        //     {
        //         id: 132,
        //         emoji: "ğŸ€"
        //     },
        //     {
        //         id: 133,
        //         emoji: "ğŸ€Ÿ"
        //     },
        //     {
        //         id: 134,
        //         emoji: "ğŸ€ "
        //     },
        //     {
        //         id: 135,
        //         emoji: "ğŸ€¡"
        //     },
        // ]
        let Mahjong = [
            {
                id: 0,
                emoji: "ğŸ€‡"
            },
            {
                id: 1,
                emoji: "ğŸ€ˆ"
            },
            {
                id: 2,
                emoji: "ğŸ€‰"
            },
            {
                id: 3,
                emoji: "ğŸ€Š"
            },
            {
                id: 4,
                emoji: "ğŸ€‹"
            },
            {
                id: 5,
                emoji: "ğŸ€Œ"
            },
            {
                id: 6,
                emoji: "ğŸ€"
            },
            {
                id: 7,
                emoji: "ğŸ€"
            },
            {
                id: 8,
                emoji: "ğŸ€"
            },
            {
                id: 9,
                emoji: "ğŸ€™"
            },
            {
                id: 10,
                emoji: "ğŸ€š"
            },
            {
                id: 11,
                emoji: "ğŸ€›"
            },
            {
                id: 12,
                emoji: "ğŸ€œ"
            },
            {
                id: 13,
                emoji: "ğŸ€"
            },
            {
                id: 14,
                emoji: "ğŸ€"
            },
            {
                id: 15,
                emoji: "ğŸ€Ÿ"
            },
            {
                id: 16,
                emoji: "ğŸ€ "
            },
            {
                id: 17,
                emoji: "ğŸ€¡"
            },
            {
                id: 18,
                emoji: "ğŸ€"
            },
            {
                id: 19,
                emoji: "ğŸ€‘"
            },
            {
                id: 20,
                emoji: "ğŸ€’"
            },
            {
                id: 21,
                emoji: "ğŸ€“"
            },
            {
                id: 22,
                emoji: "ğŸ€”"
            },
            {
                id: 23,
                emoji: "ğŸ€•"
            },
            {
                id: 24,
                emoji: "ğŸ€–"
            },
            {
                id: 25,
                emoji: "ğŸ€—"
            },
            {
                id: 26,
                emoji: "ğŸ€˜"
            },
            {
                id: 27,
                emoji: "ğŸ€€"
            },
            {
                id: 28,
                emoji: "ğŸ€"
            },
            {
                id: 29,
                emoji: "ğŸ€‚"
            },
            {
                id: 30,
                emoji: "ğŸ€ƒ"
            },
            {
                id: 31,
                emoji: "ğŸ€„"
            },
            {
                id: 32,
                emoji: "ğŸ€…"
            },
            {
                id: 33,
                emoji: "ğŸ€†"
            },
        ]

        let startbtn = document.querySelector("#start")


        let firstLeftNum = 0;   //ç¬¬ä¸€æ¬„å‰©ä¸‹çš„æ ¼æ•¸
        let firstGridNum = 0;   //ç¬¬ä¸€æ¬„è¦è½‰çš„æ ¼æ•¸

        let leftNum = 0;        //ç¬¬äºŒæ¬„å‰©ä¸‹çš„æ ¼æ•¸
        let gridNum = 0;        //ç¬¬äºŒæ¬„è¦è½‰çš„æ ¼æ•¸

        let lastLeftNum = 0;    //ç¬¬ä¸‰æ¬„å‰©ä¸‹çš„æ ¼æ•¸
        let lastGridNum = 0;    //ç¬¬ä¸‰æ¬„è¦è½‰çš„æ ¼æ•¸

        let fourLeftNum = 0;    //ç¬¬å››æ¬„å‰©ä¸‹çš„æ ¼æ•¸
        let fourGridNum = 0;    //ç¬¬å››æ¬„è¦è½‰çš„æ ¼æ•¸

        let allGrids;   //å…¨éƒ¨çš„æ¬„
        let upgrids;    //å·¦æ¬„
        let grids;      //ä¸­æ¬„
        let downgrids;  //å³æ¬„
        let fourgrids;  //ç¬¬å››æ¬„

        let upTime = 0;     //ä¸Šä¸€æ ¼æ‰€åœ¨çš„æ ¼æ•¸
        let nowTime = 1;    //ç›®å‰æ‰€åœ¨çš„æ ¼æ•¸
        let downTime = 2;   //ä¸‹ä¸€æ ¼æ‰€åœ¨çš„æ ¼æ•¸

        let _colNum = 0;    //ç¬¬ä¸€æ¬„æ ¼æ•¸
        let colNum = 0;     //ç¬¬äºŒæ¬„æ ¼æ•¸
        let __colNum = 0;   //ç¬¬ä¸‰æ¬„æ ¼æ•¸
        let fourcolNum = 0;   //ç¬¬å››æ¬„æ ¼æ•¸

        let round1Time = 0;     //æ–¹æ³•è·‘çš„æ¬¡æ•¸
        let round2Time = 0;     //æ–¹æ³•è·‘çš„æ¬¡æ•¸
        let round3Time = 0;     //æ–¹æ³•è·‘çš„æ¬¡æ•¸
        let round4Time = 0;     //æ–¹æ³•è·‘çš„æ¬¡æ•¸

        let firstRoundTime = 0; //è¦æ›å¾—ç‰Œçš„ç« æ•¸
        let roundTime = 0;      //è¦æ›å¾—ç‰Œçš„ç« æ•¸
        let lastRoundTime = 0;  //è¦æ›å¾—ç‰Œçš„ç« æ•¸
        let fourRoundTime = 0;  //è¦æ›å¾—ç‰Œçš„ç« æ•¸

        let _speed = 0;
        let speed = 0;
        let __speed = 0;
        let fourspeed = 0;

        let _out;
        let out;
        let __out;
        let fourout;

        let handCards = document.querySelector(".hand-cards")
        let sort = false;

        function start() {
            allGrids = document.querySelectorAll("[row-id]")
            // allGrids = Array.from(allGrids).sort((a, b) => {
            //     return a.getAttributeNode("id").value - b.getAttributeNode("id").value
            // })
            // console.log(allGrids)
            allGrids.forEach(x => {
                let id = x.getAttributeNode("row-id").value
                let data = Mahjong.find(x => x.id == id)
                let img = document.createElement("i")
                img.innerText = data.emoji
                x.appendChild(img)
            })
        }

        function run() {
            startbtn.removeEventListener("click", run);


            //============ç¬¬ä¸€å€‹==============
            let _runTime = Math.floor(Math.random() * Mahjong.length) + 1
            firstLeftNum = _runTime + (1 * allGrids.length);
            firstGridNum = firstLeftNum;

            //============ç¬¬äºŒå€‹==============
            let runTime = Math.floor(Math.random() * Mahjong.length) + 1
            leftNum = runTime + (1 * allGrids.length);
            gridNum = leftNum;

            //============ç¬¬ä¸‰å€‹==============
            let __runTime = Math.floor(Math.random() * Mahjong.length) + 1
            lastLeftNum = __runTime + (1 * allGrids.length);
            lastGridNum = lastLeftNum;

            //============ç¬¬å››å€‹==============
            let fourrunTime = Math.floor(Math.random() * Mahjong.length) + 1
            fourLeftNum = fourrunTime + (5 * allGrids.length);
            fourGridNum = fourLeftNum;

            round1()
        }

        function round1() {
            // rest.removeEventListener("click", drink)
            // rest.removeEventListener("click", c87)
            // rest.addEventListener("click", runningDrink)
            round1Time++;

            upgrids = document.querySelectorAll(`[col-id="1"]`)
            //============ç¬¬ä¸€å€‹==============

            if (round1Time >= Mahjong.length) {
                round1Time = 0;
            }

            upgrids.forEach(x => {

                if (_colNum >= upgrids.length) {
                    _colNum = 0;
                }
                firstRoundTime = _colNum + round1Time;
                if (firstRoundTime >= Mahjong.length) {
                    firstRoundTime -= 7;
                }
                x.setAttribute("row-id", `${firstRoundTime}`)
                let id = x.getAttributeNode("row-id").value
                let data = Mahjong.find(x => x.id == id)
                let img = x.querySelector("i")
                img.innerText = data.emoji
                x.appendChild(img)
                _colNum++;
            })
            firstLeftNum--;
            // console.log(`ç¬¬ä¸€å€‹:è¦èµ°çš„æ­¥æ•¸${firstGridNum},å‰©ä¸‹çš„æ­¥æ•¸${firstLeftNum}`)


            if (firstLeftNum > 0) {

                _out = setTimeout(round1, _speed);

                if (firstLeftNum < Math.floor((firstGridNum / 5))) {
                    _speed += 7
                }
                else if (firstGridNum - 3 == firstLeftNum) round2()
            }
            else {
                clearTimeout(_out);
            }

        }
        function round2() {
            grids = document.querySelectorAll(`[col-id="2"]`)
            round2Time++;

            if (round2Time >= Mahjong.length) {
                round2Time = 0;
            }

            grids.forEach(x => {
                if (colNum >= grids.length) {
                    colNum = 0;
                }
                roundTime = colNum + round2Time;
                if (roundTime >= Mahjong.length) {
                    roundTime -= 7;
                }
                x.setAttribute("row-id", `${roundTime}`)
                let id = x.getAttributeNode("row-id").value
                let data = Mahjong.find(x => x.id == id)
                let img = x.querySelector("i")
                img.innerText = data.emoji
                x.appendChild(img)
                colNum++;
            })
            leftNum--;
            // console.log(`ç¬¬äºŒå€‹:è¦èµ°çš„æ­¥æ•¸${gridNum},å‰©ä¸‹çš„æ­¥æ•¸${leftNum}`)

            if (leftNum > 0) {

                out = setTimeout(round2, speed);

                if (leftNum < Math.floor((gridNum / 5))) {
                    speed += 7
                }
                else if (gridNum - 3 == leftNum) round3()

            }
            else {
                clearTimeout(out)
            }


        }
        function round3() {
            downgrids = document.querySelectorAll(`[col-id="3"]`)
            round3Time++;

            if (round3Time >= Mahjong.length) {
                round3Time = 0;
            }

            downgrids.forEach(x => {
                if (__colNum >= downgrids.length) {
                    __colNum = 0;
                }
                lastRoundTime = __colNum + round3Time;
                if (lastRoundTime >= Mahjong.length) {
                    lastRoundTime -= 7;
                }
                x.setAttribute("row-id", `${lastRoundTime}`)
                let id = x.getAttributeNode("row-id").value
                let data = Mahjong.find(x => x.id == id)
                let img = x.querySelector("i")
                img.innerText = data.emoji
                x.appendChild(img)
                __colNum++
            })
            lastLeftNum--;

            if (lastLeftNum > 0) {
                __out = setTimeout(round3, __speed);

                if (lastLeftNum < Math.floor((lastGridNum / 5))) {
                    __speed += 7
                }
                else if (lastGridNum - 3 == lastLeftNum) round4()
            }
            else {
                clearTimeout(__out)
            }
        }
        function round4() {
            fourgrids = document.querySelectorAll(`[col-id="4"]`)
            round4Time++;

            if (round4Time >= Mahjong.length) {
                round4Time = 0;
            }

            fourgrids.forEach(x => {
                if (fourcolNum >= fourgrids.length) {
                    fourcolNum = 0;
                }
                fourRoundTime = fourcolNum + round4Time;
                if (fourRoundTime >= Mahjong.length) {
                    fourRoundTime -= 7;
                }
                x.setAttribute("row-id", `${fourRoundTime}`)
                let id = x.getAttributeNode("row-id").value
                let data = Mahjong.find(x => x.id == id)
                let img = x.querySelector("i")
                img.innerText = data.emoji
                x.appendChild(img)
                fourcolNum++
            })
            fourLeftNum--;

            if (fourLeftNum > 0) {
                fourout = setTimeout(round4, fourspeed);

                if (fourLeftNum < Math.floor((fourGridNum / 5))) {
                    fourspeed += 7
                }
            }
            else {
                clearTimeout(fourout)
                // c8763.removeEventListener("click", runningC87)
                startbtn.addEventListener("click", run)
                // rest.removeEventListener("click", runningDrink)
                // rest.addEventListener("click", drink)
                // c8763.addEventListener("click", cd)
                setTimeout(check, 500);
            }
        }

        function check() {
            let container = document.querySelector(".container")
            let result = document.querySelectorAll(".col-2.active")
            console.log(result)
            result.forEach(x => {
                let id = x.attributes["row-id"].value
                let data = Mahjong.find(x => x.id == id)
                let i = document.createElement("i")
                let div = document.createElement("div")
                div.classList.add("tile")
                div.setAttribute("tileId", `${data.id}`)
                div.innerText = data.emoji
                handCards.append(div)
            })
            // let Father = result[1].parentNode
            // let i = Father.querySelectorAll('i')
            // i.forEach(x => {
            //     let i = document.createElement("i")
            //     let div = document.createElement("div")
            //     div.classList.add("tile")
            //     div.innerText = x.innerText
            //     handCards.append(div)
            // div.append(x.innerText)
            // _i.append(x.innerText)
            // handCards.append(_i)
            // })

            _speed = 0;
            speed = 0;
            __speed = 0;
            fourspeed = 0;

            if (handCards.childElementCount == 16) {
                startbtn.removeEventListener("click", run)
                let tiles = document.querySelectorAll(".tile")
                let div = document.createElement("div")
                div.classList.add("row")
                let left = document.createElement("div")
                let mid = document.createElement("div")
                let right = document.createElement("div")
                left.classList.add("col-4")
                mid.classList.add("col-4")
                right.classList.add("col-4")
                let button = document.createElement("button")
                button.classList.add("btn", "btn-info")
                button.setAttribute("id", "sort")
                button.setAttribute("type", "button")
                button.innerText = "æ•´ç†æ‰‹ç‰Œ"
                mid.append(button)
                div.append(left)
                div.append(mid)
                div.append(right)
                handCards.append(div)

                // console.log(tiles)
                // tiles.forEach(x => {
                //     tileArray.push(x.innerText)
                // })
                // console.log(tileArray)
                button.addEventListener("click", function () {
                    if (sort == false) {
                        tilesSort(tiles)
                    }
                })
            }
        }

        function tilesSort(x) {
            sort = true;
            // let handCards = document.createElement("div")
            // handCards.classList.add("row", "hand-cards")
            x = Array.from(x).sort((a, b) => {
                return a.attributes["tileId"].value - b.attributes["tileId"].value
            })
            x.forEach(y => {
                let i = document.createElement("i")
                let div = document.createElement("div")
                let id = y.getAttributeNode("tileId").value
                let data = Mahjong.find(x => x.id == id)
                div.setAttribute("tileId", `${data.id}`)
                div.classList.add("tile")
                div.append(y)
                handCards.append(div)
            })

            // console.log(handCards.querySelectorAll(".tile"))

            // x = x.sort((a, b) => {
            //     return a.getAttributeNode("tileId").value - b.getAttributeNode("tileId").value
            // })
            // x.sort()
            // container.appendChild(handCards)
            let Restartbtn = document.createElement("button")
            Restartbtn.classList.add("btn", "btn-info")
            Restartbtn.setAttribute("id", "re")
            Restartbtn.setAttribute("type", "button")
            Restartbtn.innerText = "é‡æ–°é–‹å§‹"
            handCards.append(Restartbtn)

            Restartbtn.addEventListener("click", Restart)
        }

        function Restart() {
            handCards.innerHTML = "";
            sort = false;
            startbtn.addEventListener("click", run)
        }

        window.onload = function () {
            start()
            startbtn.addEventListener("click", run)
        }
    </script>

</body>

</html>